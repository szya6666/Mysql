引起慢查询的常见原因及一些解决方案
2018年02月26日 11:26:31
阅读数：588
1、没有索引或者没有用到索引(这是查询慢最常见的问题，是程序设计的缺陷) 
2、I/O吞吐量小，形成了瓶颈效应。 
3、没有创建计算列导致查询不优化。 
4、内存不足 
5、网络速度慢 
6、查询出的数据量过大（可以采用多次查询或其他的方法降低数据量） 
7、锁或者死锁(这也是查询慢最常见的问题，是程序设计的缺陷)sp_lock,sp_who,活动的用户查看,原因是读写竞争资源。 
9、返回了不必要的行和列 

10、查询语句不好，没有优化 

可以通过如下方法来优化查询 : 
1、 把数据、日志、索引放到不同的I/O设备上，增加读取速度，以前可以将Tempdb应放在RAID0上，SQL2000不在支持。数据量（尺寸）越大，提 高I/O越重要. 
2、纵向、横向分割表，减少表的尺寸(sp_spaceuse) 
3、升级硬件 
4、根据查询条件,建立索引,优化 索引、优化访问方式，限制结果集的数据量。注意填充因子要适当（最好是使用默认值0）。索引应该尽量小，使用字节数小的列建索引好（参照索引的创建）,不 要对有限的几个值的字段建单一索引如性别字段 
5、提高网速; 

6、扩大服务器的内存,Windows 2000和SQL server 2000能支持4-8G的内存。 

7、增加 服务器CPU个数;但是必须明白并行处理串行处理更需要资源例如内存。使用并行还是串行程是MsSQL自动评估选择的。单个任务分解成多个任务，就可以在 处理器上运行。例如耽搁查询的排序、连接、扫描和GROUP BY字句同时执行，SQL SERVER根据系统的负载情况决定最优的并行等级，复杂的需要消耗大量的CPU的查询最适合并行处理。但是更新操作 UPDATE,INSERT，DELETE还不能并行处理。 

8、如果是使用like进行查询的话，简单的使用index是不行的，但是全文索 引，耗空间。 